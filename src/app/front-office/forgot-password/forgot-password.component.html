<!-- Étape 1: Saisir l'email -->
<div *ngIf="!showOTPInput && !showChangePasswordForm">
  <form (ngSubmit)="sendEmail(email)" #forgotPasswordForm="ngForm">
    <div class="form-group">
      <label for="email">Email address</label>
      <input type="email" class="form-control" id="email" name="email" [(ngModel)]="email" required email #emailInput="ngModel">
      <div *ngIf="emailInput.invalid && (emailInput.dirty || emailInput.touched)">
        <small class="text-danger" *ngIf="emailInput.errors ? emailInput.errors['email'] : false">Invalid email</small>
        <small class="text-danger" *ngIf="!emailInput.errors && emailInput.value === ''">Email is required</small>
      </div>
    </div>
    <button type="submit" class="btn btn-primary" [disabled]="forgotPasswordForm.invalid" (click)="scrollToOTPInput()">Send OTP</button>
  </form>
</div>

<!-- Étape 2: Saisir l'OTP -->
<div *ngIf="showOTPInput && !showChangePasswordForm">
  <form (ngSubmit)="verifyOTP()" #otpForm="ngForm">
    <div class="form-group">
      <label for="otp">Enter OTP</label>
      <input type="text" class="form-control" id="otp" name="otp" [(ngModel)]="otp" required>
    </div>
    <button type="submit" class="btn btn-primary" [disabled]="otpForm.invalid">Verify OTP</button>
  </form>
</div>
 <!-- Étape 3: Changer le mot de passe -->
 <div *ngIf="showChangePasswordForm">
  <form (ngSubmit)="changePassword()" #changePasswordForm="ngForm">
    <div class="form-group">
      <label for="newPassword">New Password</label>
      <input type="password" class="form-control" id="newPassword" name="newPassword" [(ngModel)]="newPassword" required>
    </div>
    <div class="form-group">
      <label for="repeatPassword">Repeat Password</label>
      <input type="password" class="form-control" id="repeatPassword" name="repeatPassword" [(ngModel)]="repeatPassword" required>
    </div>
    <button type="submit" class="btn btn-primary" [disabled]="changePasswordForm.invalid">Change Password</button>
  </form>
</div>

<div *ngIf="message" class="message">
  {{ message }}
</div>